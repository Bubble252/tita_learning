# å¾®è°ƒå¿«é€Ÿå‚è€ƒå¡ç‰‡

## ğŸ¯ ä¸€å¥è¯æ€»ç»“
**å®Œå…¨å¯ä»¥ï¼** åŸºäº `tita_example_10000.pt` å¾®è°ƒè·‘é…·ï¼Œå¯èŠ‚çœ 30-50% è®­ç»ƒæ—¶é—´ã€‚

---

## âš¡ ä¸‰æ­¥å¿«é€Ÿå¼€å§‹

### æ­¥éª¤ 1ï¼šä¿®æ”¹é…ç½®ï¼ˆ3 è¡Œä»£ç ï¼‰

æ‰“å¼€ `configs/tita_parkour_config.py`ï¼Œæ‰¾åˆ°è¿™ä¸¤å¤„ï¼š

```python
# ç¬¬ä¸€å¤„ï¼šé™ä½å­¦ä¹ ç‡ï¼ˆç¬¬ 228 è¡Œé™„è¿‘ï¼‰
class algorithm(TitaConstraintRoughCfgPPO.algorithm):
    learning_rate = 3.e-4  # ä» 1.e-3 æ”¹ä¸º 3.e-4

# ç¬¬äºŒå¤„ï¼šå¯ç”¨æ¢å¤ï¼ˆç¬¬ 264 è¡Œé™„è¿‘ï¼‰
class runner(TitaConstraintRoughCfgPPO.runner):
    resume = True                        # ä» False æ”¹ä¸º True
    resume_path = 'tita_example_10000.pt'  # ä» None æ”¹ä¸ºä½ çš„æ¨¡å‹
```

### æ­¥éª¤ 2ï¼šç¡®è®¤æ¨¡å‹æ–‡ä»¶

```bash
# ç¡®ä¿æ¨¡å‹åœ¨é¡¹ç›®æ ¹ç›®å½•æˆ–æ—¥å¿—ç›®å½•
ls tita_example_10000.pt
# æˆ–
ls logs/tita_constraint/*/model_10000.pt
```

### æ­¥éª¤ 3ï¼šå¼€å§‹è®­ç»ƒ

```bash
python train_parkour.py --task=tita_parkour --headless
```

**å®Œæˆï¼** ç³»ç»Ÿä¼šè‡ªåŠ¨åŠ è½½é¢„è®­ç»ƒæ¨¡å‹å¹¶å¼€å§‹å¾®è°ƒã€‚

---

## ğŸ“‹ é…ç½®æ¨¡æ¿

### ä¿å®ˆå¾®è°ƒï¼ˆæ¨èï¼‰

```python
class algorithm:
    learning_rate = 3.e-4  # 1/3 åŸå§‹å­¦ä¹ ç‡

class runner:
    run_name = 'parkour_finetune_conservative'
    max_iterations = 30000  # å‡å°‘ 7000 æ¬¡
    resume = True
    resume_path = 'tita_example_10000.pt'
```

**æ•ˆæœ**ï¼š
- âœ… è®­ç»ƒæ—¶é—´ï¼š~8 å°æ—¶ï¼ˆå‡å°‘ 30%ï¼‰
- âœ… ç¨³å®šæ€§ï¼šé«˜
- âœ… ä¿ç•™æ—§æŠ€èƒ½ï¼šæœ€å¤§åŒ–

### æ¿€è¿›å¾®è°ƒ

```python
class algorithm:
    learning_rate = 1.e-3  # ä¿æŒåŸå­¦ä¹ ç‡

class runner:
    run_name = 'parkour_finetune_aggressive'
    max_iterations = 20000  # å¤§å¹…å‡å°‘
    resume = True
    resume_path = 'tita_example_10000.pt'
```

**æ•ˆæœ**ï¼š
- âœ… è®­ç»ƒæ—¶é—´ï¼š~5 å°æ—¶ï¼ˆå‡å°‘ 50%ï¼‰
- âš ï¸ ç¨³å®šæ€§ï¼šä¸­ç­‰
- âš ï¸ å¯èƒ½é—å¿˜éƒ¨åˆ†æ—§æŠ€èƒ½

---

## ğŸ”§ å¸¸è§é—®é¢˜

### Q1: æ–‡ä»¶è·¯å¾„æ€ä¹ˆå†™ï¼Ÿ

```python
# æ–¹å¼ 1ï¼šåªå†™æ–‡ä»¶åï¼ˆæ¨èï¼Œä¼šè‡ªåŠ¨æœç´¢ï¼‰
resume_path = 'tita_example_10000.pt'

# æ–¹å¼ 2ï¼šç›¸å¯¹è·¯å¾„
resume_path = 'logs/tita_constraint/.../model_10000.pt'

# æ–¹å¼ 3ï¼šç»å¯¹è·¯å¾„ï¼ˆæœ€ä¿é™©ï¼‰
resume_path = '/home/bubble/æ¡Œé¢/tita/tita_rl/tita_example_10000.pt'
```

### Q2: å¦‚ä½•çŸ¥é“æ˜¯å¦åŠ è½½æˆåŠŸï¼Ÿ

è®­ç»ƒå¼€å§‹æ—¶ä¼šæ˜¾ç¤ºï¼š

```
Loading model from: tita_example_10000.pt
âœ… æˆåŠŸåŠ è½½é¢„è®­ç»ƒæ¨¡å‹ï¼
  - Actor ç½‘ç»œ: å·²åŠ è½½
  - Critic ç½‘ç»œ: å·²åŠ è½½
```

### Q3: æ¨¡å‹ç»“æ„ä¸åŒ¹é…æ€ä¹ˆåŠï¼Ÿ

**é”™è¯¯**ï¼š`Size mismatch for actor.xxx`

**åŸå› **ï¼šè§‚æµ‹ç»´åº¦ä¸åŒï¼ˆè·‘é…·åŠ äº†æ·±åº¦ç‰¹å¾ï¼‰

**æ–¹æ¡ˆ 1**ï¼ˆæ¨èï¼‰ï¼šè®­ç»ƒæ—¶å…ˆä¸ç”¨æ·±åº¦ç›¸æœº

```python
class depth:
    use_camera = False  # æ”¹ä¸º False

class env:
    n_depth_features = 0  # æ”¹ä¸º 0
    num_observations = n_proprio + n_scan + history_len*n_proprio + n_priv_latent
    # ä¸åŠ  n_depth_features
```

**æ–¹æ¡ˆ 2**ï¼šé‡æ–°è®­ç»ƒä¸€ä¸ªå¸¦æ·±åº¦ç›¸æœºçš„åŸºç¡€æ¨¡å‹

### Q4: åº”è¯¥è·³è¿‡å“ªäº›è¯¾ç¨‹é˜¶æ®µï¼Ÿ

| é¢„è®­ç»ƒæ¨¡å‹è´¨é‡ | å»ºè®®è¯¾ç¨‹ |
|--------------|---------|
| ğŸ† ä¼˜ç§€ï¼ˆèƒ½ç¨³å®šè¡Œèµ°ï¼‰ | è·³è¿‡é˜¶æ®µ 1ï¼Œä»é˜¶æ®µ 2 å¼€å§‹ |
| ğŸ‘ è‰¯å¥½ï¼ˆåŸºæœ¬èƒ½èµ°ï¼‰ | ä½¿ç”¨å®Œæ•´ä¸‰é˜¶æ®µ |
| ğŸ˜ ä¸€èˆ¬ï¼ˆä¸å¤ªç¨³å®šï¼‰ | ä½¿ç”¨å®Œæ•´ä¸‰é˜¶æ®µ |

---

## ğŸ“Š æ•ˆæœå¯¹æ¯”

| æŒ‡æ ‡ | ä»å¤´è®­ç»ƒ | å¾®è°ƒè®­ç»ƒ |
|------|---------|---------|
| è®­ç»ƒæ—¶é—´ | ~11 å°æ—¶ | ~6-8 å°æ—¶ âœ… |
| åˆæœŸå¥–åŠ± | 5-10 | 40-60 âœ… |
| æ”¶æ•›é€Ÿåº¦ | 8000 iter | 3000 iter âœ… |
| æœ€ç»ˆæ€§èƒ½ | 150-200 | 150-200 âœ… |

---

## ğŸ“ åŸç†

### ä¸ºä»€ä¹ˆå¾®è°ƒæ›´å¿«ï¼Ÿ

```
ä»å¤´è®­ç»ƒï¼š
  0% â†’ å­¦ä¹ ç«™ç«‹ â†’ å­¦ä¹ è¡Œèµ° â†’ å­¦ä¹ å¹³è¡¡ â†’ å­¦ä¹ è·‘é…·
  [    10000 iter    ] [    10000 iter   ] [ 17000 iter ]

å¾®è°ƒè®­ç»ƒï¼š
  50% â†’ å·²ç»ä¼šèµ°ï¼ â†’ å­¦ä¹ éšœç¢è¯†åˆ« â†’ å­¦ä¹ è·‘é…·
        [è·³è¿‡ï¼]    [  10000 iter  ] [ 15000 iter ]
```

### è¿ç§»å­¦ä¹ çš„æ ¸å¿ƒ

é¢„è®­ç»ƒæ¨¡å‹å·²ç»å­¦ä¼šï¼š
- âœ… ç«™ç«‹ä¸å€’
- âœ… åŸºç¡€è¡Œèµ°
- âœ… é€Ÿåº¦æ§åˆ¶
- âœ… æ–¹å‘è½¬å‘

åªéœ€å­¦ä¹ æ–°æŠ€èƒ½ï¼š
- ğŸ†• éšœç¢æ£€æµ‹
- ğŸ†• è·³è·ƒæ—¶æœº
- ğŸ†• ç€é™†ç¨³å®š

---

## ğŸš€ å®Œæ•´å·¥ä½œæµ

```bash
# 1. æ£€æŸ¥æ¨¡å‹
ls -lh tita_example_10000.pt

# 2. ä¿®æ”¹é…ç½®
vim configs/tita_parkour_config.py
# è®¾ç½®: resume=True, resume_path='tita_example_10000.pt', learning_rate=3e-4

# 3. å¼€å§‹è®­ç»ƒ
python train_parkour.py --task=tita_parkour --headless

# 4. ç›‘æ§è¿›åº¦
tensorboard --logdir=logs/tita_parkour

# 5. æµ‹è¯•æ¨¡å‹
python test_parkour.py \
    --task=tita_parkour \
    --load_run=parkour_finetune_conservative \
    --checkpoint=30000
```

---

## ğŸ’¡ æœ€ä½³å®è·µ

1. **å…ˆè¯•å¾®è°ƒ**ï¼šå¦‚æœæœ‰é¢„è®­ç»ƒæ¨¡å‹ï¼Œä¼˜å…ˆå°è¯•å¾®è°ƒ
2. **é™ä½å­¦ä¹ ç‡**ï¼šä½¿ç”¨ 1/3 åˆ° 1/10 çš„å­¦ä¹ ç‡
3. **ä¿å­˜æ£€æŸ¥ç‚¹**ï¼šæ¯ 500 æ¬¡ä¿å­˜ï¼Œæ–¹ä¾¿å›é€€
4. **ç›‘æ§æ›²çº¿**ï¼šåˆæœŸå¥–åŠ±åº”è¯¥å¾ˆé«˜ï¼ˆ40+ï¼‰
5. **è¯¾ç¨‹è°ƒæ•´**ï¼šå¯ä»¥è·³è¿‡åŸºç¡€é˜¶æ®µ

---

## ğŸ“š å®Œæ•´æ–‡æ¡£

è¯¦ç»†è¯´æ˜è¯·æŸ¥çœ‹ï¼š`FINE_TUNING_GUIDE.md`

---

**è®°ä½**ï¼šå¾®è°ƒä¸æ˜¯å¯é€‰çš„ä¼˜åŒ–ï¼Œè€Œæ˜¯**å¼ºçƒˆæ¨è**çš„æ–¹æ³•ï¼ğŸ‰

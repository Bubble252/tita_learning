# è®­ç»ƒæ–¹æ³•å¯¹æ¯”ï¼šåŸå§‹ vs è·‘é…·è¯¾ç¨‹å­¦ä¹ 

## ğŸ“‹ æ–‡æ¡£æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†å¯¹æ¯”äº† **åŸå§‹è®­ç»ƒæ–¹æ³•** (`train.py`) å’Œ **è·‘é…·è¯¾ç¨‹å­¦ä¹ è®­ç»ƒæ–¹æ³•** (`train_parkour.py`) çš„å·®å¼‚ï¼Œå¹¶è§£é‡Šä¸ºä»€ä¹ˆæ–°æ–¹æ³•éœ€è¦æ›´å¤šä»£ç ã€‚

---

## 1ï¸âƒ£ æ ¸å¿ƒå·®å¼‚æ€»è§ˆ

| ç‰¹æ€§ | åŸå§‹è®­ç»ƒ (`train.py`) | è·‘é…·è®­ç»ƒ (`train_parkour.py`) |
|------|---------------------|----------------------------|
| **ä»£ç è¡Œæ•°** | 45 è¡Œ | 242 è¡Œ |
| **è®­ç»ƒç­–ç•¥** | å›ºå®šå¥–åŠ±æƒé‡ | ä¸‰é˜¶æ®µè¯¾ç¨‹å­¦ä¹  |
| **ç¯å¢ƒéš¾åº¦** | å›ºå®šéš¾åº¦ | åŠ¨æ€é€’å¢éš¾åº¦ |
| **å¥–åŠ±å‡½æ•°** | å§‹ç»ˆä¸å˜ | åŠ¨æ€è°ƒæ•´æƒé‡ |
| **è®­ç»ƒç›‘æ§** | åŸºç¡€æ—¥å¿— | è¯¦ç»†é˜¶æ®µè¿›åº¦ |
| **å­¦ä¹ æ›²çº¿** | å¯èƒ½ä¸ç¨³å®š | æ¸è¿›å¼ç¨³å®šå­¦ä¹  |
| **é€‚ç”¨åœºæ™¯** | ç®€å•åœ°å½¢è¡Œèµ° | å¤æ‚è·‘é…·æŠ€èƒ½ |

---

## 2ï¸âƒ£ åŸå§‹è®­ç»ƒæ–¹æ³• (`train.py`)

### ğŸ” ä»£ç ç»“æ„

```python
def train(args):
    # 1. åˆ›å»ºç¯å¢ƒ
    env, env_cfg = task_registry.make_env(name=args.task, args=args)
    
    # 2. åˆ›å»º PPO ç®—æ³•
    ppo_runner, train_cfg = task_registry.make_alg_runner(env=env, name=args.task, args=args)
    
    # 3. ä¿å­˜é…ç½®
    task_registry.save_cfgs(name=args.task, train_cfg=train_cfg)
    
    # 4. å¼€å§‹è®­ç»ƒï¼ˆä¸€è¡Œä»£ç ï¼‰
    ppo_runner.learn(num_learning_iterations=train_cfg.runner.max_iterations, 
                     init_at_random_ep_len=True)
```

### âœ… ä¼˜ç‚¹
- **ç®€æ´æ˜äº†**ï¼šåªéœ€ 4 æ­¥ï¼Œä»£ç å°‘
- **æ˜“äºç†è§£**ï¼šæµç¨‹æ¸…æ™°ï¼Œé€‚åˆåˆå­¦è€…
- **å¼€ç®±å³ç”¨**ï¼šæ— éœ€é¢å¤–é…ç½®

### âŒ ç¼ºç‚¹
- **è®­ç»ƒå›°éš¾**ï¼šå¤æ‚ä»»åŠ¡ï¼ˆå¦‚è·‘é…·ï¼‰å¯èƒ½æ— æ³•æ”¶æ•›
- **å¥–åŠ±å†²çª**ï¼šå¤šä¸ªå¥–åŠ±åŒæ—¶ä¼˜åŒ–å¯èƒ½ç›¸äº’çŸ›ç›¾
- **æ•ˆç‡ä½ä¸‹**ï¼šä»å¤´å­¦ä¹ å¤æ‚æŠ€èƒ½éœ€è¦æ›´å¤šæ—¶é—´
- **ç¼ºä¹å¼•å¯¼**ï¼šæœºå™¨äººä¸çŸ¥é“å…ˆå­¦ä»€ä¹ˆåå­¦ä»€ä¹ˆ

### ğŸ“Š è®­ç»ƒæµç¨‹å›¾

```
å¼€å§‹ â†’ åˆ›å»ºç¯å¢ƒ â†’ åˆ›å»ºç®—æ³• â†’ [å›ºå®šéš¾åº¦è®­ç»ƒ 30000 æ¬¡] â†’ ç»“æŸ
                                  â†“
                          å¥–åŠ±æƒé‡å§‹ç»ˆä¸å˜
```

---

## 3ï¸âƒ£ è·‘é…·è¯¾ç¨‹å­¦ä¹ è®­ç»ƒæ–¹æ³• (`train_parkour.py`)

### ğŸ” ä»£ç ç»“æ„ï¼ˆä¸ºä»€ä¹ˆæœ‰ 242 è¡Œï¼Ÿï¼‰

```python
def train_with_curriculum(args):
    # ========== éƒ¨åˆ† 1: åˆå§‹åŒ–ï¼ˆä¸åŸç‰ˆç±»ä¼¼ï¼Œ~40 è¡Œï¼‰==========
    env, env_cfg = task_registry.make_env(name=args.task, args=args)
    ppo_runner, train_cfg = task_registry.make_alg_runner(env=env, name=args.task, args=args)
    curriculum = ParkourCurriculum()  # æ–°å¢ï¼šè¯¾ç¨‹ç®¡ç†å™¨
    
    # ========== éƒ¨åˆ† 2: é‡å†™å­¦ä¹ å¾ªç¯ï¼ˆæ–°å¢ï¼Œ~150 è¡Œï¼‰==========
    def learn_with_curriculum(num_learning_iterations, init_at_random_ep_len=True):
        # 2.1 åˆå§‹åŒ–ç»Ÿè®¡å˜é‡ï¼ˆ~20 è¡Œï¼‰
        obs = env.get_observations()
        rewbuffer = []
        lenbuffer = []
        
        # 2.2 ä¸»è®­ç»ƒå¾ªç¯ï¼ˆ~100 è¡Œï¼‰
        for it in range(num_learning_iterations):
            # 2.2.1 è¯¾ç¨‹å­¦ä¹ ï¼šæ£€æŸ¥æ˜¯å¦åˆ‡æ¢é˜¶æ®µï¼ˆ~15 è¡Œï¼‰
            if curriculum.should_update_config(it, update_interval=100):
                stage = curriculum.get_stage(it)
                if stage != current_stage:
                    curriculum.update_reward_scales(env, stage)
            
            # 2.2.2 æ•°æ®é‡‡é›†ï¼ˆRolloutï¼‰ï¼ˆ~15 è¡Œï¼‰
            for i in range(train_cfg.runner.num_steps_per_env):
                actions = ppo_runner.alg.act(obs, critic_obs)
                obs, rewards, dones, infos = env.step(actions)
                ppo_runner.alg.process_env_step(rewards, costs, dones, infos)
            
            # 2.2.3 ç­–ç•¥æ›´æ–°ï¼ˆ~5 è¡Œï¼‰
            ppo_runner.alg.compute_returns(critic_obs)
            ppo_runner.alg.update()
            
            # 2.2.4 æ—¥å¿—è®°å½•ï¼ˆ~30 è¡Œï¼‰
            if it % train_cfg.runner.log_interval == 0:
                progress = curriculum.get_progress(it)
                print(f"é˜¶æ®µ: {progress['stage_name']}")
                print(f"é˜¶æ®µè¿›åº¦: {progress['stage_progress']*100:.1f}%")
                # ... æ›´å¤šè¯¦ç»†æ—¥å¿—
            
            # 2.2.5 ä¿å­˜æ£€æŸ¥ç‚¹ï¼ˆ~10 è¡Œï¼‰
            if it % train_cfg.runner.save_interval == 0:
                ppo_runner.save(...)
    
    # ========== éƒ¨åˆ† 3: å¯åŠ¨è®­ç»ƒï¼ˆ~20 è¡Œï¼‰==========
    ppo_runner.learn_with_curriculum(...)
```

### ğŸ“ˆ ä¸ºä»€ä¹ˆä»£ç è¿™ä¹ˆå¤šï¼Ÿè¯¦ç»†åˆ†æ

| ä»£ç éƒ¨åˆ† | è¡Œæ•° | å æ¯” | åŠŸèƒ½è¯´æ˜ |
|---------|------|------|---------|
| **1. åˆå§‹åŒ–ä¸æ³¨é‡Š** | ~50 è¡Œ | 21% | å¯¼å…¥ã€æ–‡æ¡£å­—ç¬¦ä¸²ã€ç¯å¢ƒåˆ›å»º |
| **2. è¯¾ç¨‹å­¦ä¹ æ ¸å¿ƒé€»è¾‘** | ~30 è¡Œ | 12% | é˜¶æ®µåˆ‡æ¢ã€å¥–åŠ±æ›´æ–° |
| **3. è®­ç»ƒå¾ªç¯ï¼ˆRolloutï¼‰** | ~40 è¡Œ | 17% | æ•°æ®é‡‡é›†ã€ç¯å¢ƒäº¤äº’ |
| **4. è¯¦ç»†æ—¥å¿—ä¸ç›‘æ§** | ~60 è¡Œ | 25% | è¿›åº¦æ‰“å°ã€TensorBoard è®°å½• |
| **5. æ£€æŸ¥ç‚¹ä¿å­˜** | ~20 è¡Œ | 8% | å®šæœŸä¿å­˜æ¨¡å‹ |
| **6. ç¾åŒ–è¾“å‡º** | ~30 è¡Œ | 12% | è¿›åº¦æ¡ã€è¡¨æ ¼ã€åˆ†éš”ç¬¦ |
| **7. ä¸»å‡½æ•°ä¸é…ç½®** | ~12 è¡Œ | 5% | æ³¨å†Œä»»åŠ¡ã€å‚æ•°è§£æ |

### âœ… æ–°æ–¹æ³•çš„ä¼˜åŠ¿

#### 1. **è¯¾ç¨‹å­¦ä¹ ç­–ç•¥**ï¼ˆæœ€é‡è¦ï¼ï¼‰
```
é˜¶æ®µ 1 (10000 iter): å¹³åœ°è¡Œèµ°
  â”œâ”€ åœ°å½¢éš¾åº¦: Level 0ï¼ˆå¹³åœ°ï¼‰
  â”œâ”€ éšœç¢é«˜åº¦: 5cm
  â””â”€ å¥–åŠ±æƒé‡: obstacle_clearance=0.5, collision=-0.5
            â†“ è‡ªåŠ¨åˆ‡æ¢
é˜¶æ®µ 2 (10000 iter): å°éšœç¢è·¨è¶Š
  â”œâ”€ åœ°å½¢éš¾åº¦: Level 3ï¼ˆä¸­ç­‰ï¼‰
  â”œâ”€ éšœç¢é«˜åº¦: 10cm
  â””â”€ å¥–åŠ±æƒé‡: obstacle_clearance=1.0, jump_timing=0.5, collision=-1.0
            â†“ è‡ªåŠ¨åˆ‡æ¢
é˜¶æ®µ 3 (17000 iter): å®Œç¾è·‘é…·
  â”œâ”€ åœ°å½¢éš¾åº¦: Level 7ï¼ˆå›°éš¾ï¼‰
  â”œâ”€ éšœç¢é«˜åº¦: 15cm
  â””â”€ å¥–åŠ±æƒé‡: obstacle_clearance=2.0, jump_timing=1.5, landing_stability=1.0, collision=-5.0
```

#### 2. **åŠ¨æ€å¥–åŠ±è°ƒæ•´**
- **åŸç‰ˆ**ï¼šæ‰€æœ‰å¥–åŠ±æƒé‡ä»å¤´åˆ°å°¾ä¸å˜
- **æ–°ç‰ˆ**ï¼šæ ¹æ®å­¦ä¹ é˜¶æ®µåŠ¨æ€è°ƒæ•´
  - åˆæœŸï¼šé¼“åŠ±æ¢ç´¢ï¼ˆä½æƒ©ç½šï¼‰
  - ä¸­æœŸï¼šå¼•å…¥æ–°æŠ€èƒ½ï¼ˆæ–°å¥–åŠ±ï¼‰
  - åæœŸï¼šä¸¥æ ¼è¦æ±‚ï¼ˆé«˜æƒ©ç½šï¼‰

#### 3. **è¯¦ç»†è¿›åº¦ç›‘æ§**
```python
# åŸç‰ˆæ—¥å¿—ï¼ˆç”± PPO Runner è‡ªåŠ¨æ‰“å°ï¼‰
Iteration 1000: mean_reward=50.2

# æ–°ç‰ˆæ—¥å¿—ï¼ˆè¯¦ç»†ä¿¡æ¯ï¼‰
======================================================================
ğŸ“Š è¿­ä»£ 1000/37000
======================================================================
é˜¶æ®µ: stage_1_flat_walking
é˜¶æ®µè¿›åº¦: 10.0%
æ€»è¿›åº¦: 2.7%
å¹³å‡å¥–åŠ±: 50.23
å¹³å‡å›åˆé•¿åº¦: 245.6
é‡‡é›†æ—¶é—´: 1.234s
å­¦ä¹ æ—¶é—´: 0.456s
======================================================================
```

#### 4. **æ™ºèƒ½é˜¶æ®µåˆ‡æ¢**
```python
# æ¯ 100 æ¬¡è¿­ä»£æ£€æŸ¥ä¸€æ¬¡
if curriculum.should_update_config(it, update_interval=100):
    stage = curriculum.get_stage(it)
    if stage != current_stage:
        # è‡ªåŠ¨æ›´æ–°å¥–åŠ±æƒé‡
        curriculum.update_reward_scales(env, stage)
        # æ‰“å°åˆ‡æ¢ä¿¡æ¯
        print("ğŸ“ åˆ‡æ¢åˆ°æ–°é˜¶æ®µ...")
```

---

## 4ï¸âƒ£ ä¸ºä»€ä¹ˆæ–°æ–¹æ³•éœ€è¦æ›´å¤šä»£ç ï¼Ÿ

### ğŸ¯ åŸå›  1: é‡å†™è®­ç»ƒå¾ªç¯

**åŸç‰ˆ**ï¼šç›´æ¥è°ƒç”¨ `ppo_runner.learn()`ï¼ˆ1 è¡Œï¼‰
```python
ppo_runner.learn(num_learning_iterations=30000, init_at_random_ep_len=True)
```

**æ–°ç‰ˆ**ï¼šå®Œå…¨é‡å†™è®­ç»ƒå¾ªç¯ä»¥æ’å…¥è¯¾ç¨‹å­¦ä¹ é€»è¾‘ï¼ˆ~150 è¡Œï¼‰
```python
def learn_with_curriculum(num_learning_iterations, init_at_random_ep_len=True):
    # éœ€è¦æ‰‹åŠ¨å®ç° PPO Runner å†…éƒ¨çš„æ‰€æœ‰é€»è¾‘
    for it in range(num_learning_iterations):
        # 1. è¯¾ç¨‹å­¦ä¹ æ£€æŸ¥ï¼ˆæ–°å¢ï¼‰
        if curriculum.should_update_config(it):
            ...
        
        # 2. Rolloutï¼ˆåŸ PPO å†…éƒ¨é€»è¾‘ï¼‰
        for i in range(num_steps_per_env):
            actions = alg.act(obs, critic_obs)
            obs, rewards, dones = env.step(actions)
            ...
        
        # 3. ç­–ç•¥æ›´æ–°ï¼ˆåŸ PPO å†…éƒ¨é€»è¾‘ï¼‰
        alg.compute_returns(critic_obs)
        alg.update()
        
        # 4. è¯¦ç»†æ—¥å¿—ï¼ˆæ–°å¢ï¼‰
        if it % log_interval == 0:
            progress = curriculum.get_progress(it)
            print(...)
```

**ä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥ä¿®æ”¹ PPO Runnerï¼Ÿ**
- PPO Runner æ˜¯é€šç”¨çš„å¼ºåŒ–å­¦ä¹ ç®—æ³•ï¼Œä¸åº”è¯¥åŒ…å«ä»»åŠ¡ç‰¹å®šé€»è¾‘
- è¯¾ç¨‹å­¦ä¹ æ˜¯è·‘é…·ä»»åŠ¡ä¸“ç”¨çš„ï¼Œä¸é€‚åˆæ”¾åœ¨é€šç”¨ä»£ç ä¸­
- é€šè¿‡åŒ…è£…ï¼ˆwrapperï¼‰çš„æ–¹å¼å¯ä»¥ä¿æŒä»£ç çš„æ¨¡å—åŒ–

### ğŸ¯ åŸå›  2: è¯¦ç»†çš„æ—¥å¿—ä¸ç›‘æ§

åŸç‰ˆä¾èµ– PPO Runner çš„é»˜è®¤æ—¥å¿—ï¼Œä¿¡æ¯æœ‰é™ï¼š
```
[INFO] Iteration 1000, reward: 50.2
```

æ–°ç‰ˆéœ€è¦æ˜¾ç¤ºè¯¾ç¨‹å­¦ä¹ çš„è¯¦ç»†ä¿¡æ¯ï¼š
```
======================================================================
ğŸ“Š è¿­ä»£ 10000/37000
======================================================================
ğŸ“ è¯¾ç¨‹å­¦ä¹ é˜¶æ®µåˆ‡æ¢
======================================================================
ğŸ“Œ é˜¶æ®µåç§°: stage_2_small_obstacles
ğŸ“ æè¿°: å­¦ä¹ è¯†åˆ«å’Œè·¨è¶Šå°éšœç¢
ğŸ”¢ å½“å‰è¿­ä»£: 10000
â±ï¸  é˜¶æ®µæ—¶é•¿: 10000 iterations
ğŸ”ï¸  åœ°å½¢éš¾åº¦: Level 3
ğŸ“ éšœç¢é«˜åº¦: 10.0 cm
======================================================================
ğŸ¯ å…³é”®å¥–åŠ±æƒé‡:
   obstacle_clearance        :     1.0
   jump_timing              :     0.5
   landing_stability        :  ä¸å­˜åœ¨
   collision                :    -1.0
   termination              :  -150.0
======================================================================
```

è¿™äº›ç¾åŒ–è¾“å‡ºéœ€è¦å¤§é‡ä»£ç ï¼ˆ~30-40 è¡Œï¼‰ã€‚

### ğŸ¯ åŸå›  3: è¯¾ç¨‹ç®¡ç†å™¨é›†æˆ

éœ€è¦åœ¨è®­ç»ƒå¾ªç¯ä¸­é›†æˆè¯¾ç¨‹ç®¡ç†å™¨ï¼š
```python
# åˆ›å»ºè¯¾ç¨‹ç®¡ç†å™¨
curriculum = ParkourCurriculum()
curriculum.print_curriculum_summary()  # æ‰“å°è¯¾ç¨‹é…ç½®

# åœ¨å¾ªç¯ä¸­ä½¿ç”¨
current_stage = curriculum.get_stage(0)
curriculum.update_reward_scales(env, current_stage)

for it in range(iterations):
    if curriculum.should_update_config(it):
        stage = curriculum.get_stage(it)
        if stage != current_stage:
            current_stage = stage
            curriculum.update_reward_scales(env, stage)
```

è¿™éƒ¨åˆ†é€»è¾‘éœ€è¦ ~30 è¡Œä»£ç ã€‚

### ğŸ¯ åŸå›  4: é”™è¯¯å¤„ç†ä¸æç¤ºä¿¡æ¯

æ–°ç‰ˆæ·»åŠ äº†æ›´å¤šç”¨æˆ·å‹å¥½çš„æç¤ºï¼š
```python
print("ğŸ“ æ³¨å†Œè·‘é…·ä»»åŠ¡...")
print("ğŸ“¦ åˆ›å»ºè®­ç»ƒç¯å¢ƒ...")
print("ğŸ§  åˆ›å»ºç­–ç•¥ç½‘ç»œ...")
print("ğŸ“š åˆå§‹åŒ–è¯¾ç¨‹å­¦ä¹ ç®¡ç†å™¨...")
print("ğŸš€ å¼€å§‹è®­ç»ƒ")
print("âœ… è®­ç»ƒå®Œæˆï¼")
print("ğŸ’¾ ä¿å­˜æœ€ç»ˆæ¨¡å‹...")
```

è¿™äº›æç¤ºè™½ç„¶ä¸æ˜¯å¿…éœ€çš„ï¼Œä½†èƒ½æå¤§æå‡ç”¨æˆ·ä½“éªŒã€‚

---

## 5ï¸âƒ£ ä»£ç å¤æ‚åº¦å¯¹æ¯”

### åŸç‰ˆ `train.py` çš„ç®€æ´æ€§
```python
# å®Œæ•´çš„è®­ç»ƒæµç¨‹åªéœ€ 4 è¡Œï¼
env, env_cfg = task_registry.make_env(name=args.task, args=args)
ppo_runner, train_cfg = task_registry.make_alg_runner(env=env, name=args.task, args=args)
task_registry.save_cfgs(name=args.task, train_cfg=train_cfg)
ppo_runner.learn(num_learning_iterations=train_cfg.runner.max_iterations, init_at_random_ep_len=True)
```

### æ–°ç‰ˆ `train_parkour.py` çš„åŠŸèƒ½æ€§
```python
# éœ€è¦å®ç°çš„é¢å¤–åŠŸèƒ½ï¼š
1. è¯¾ç¨‹ç®¡ç†å™¨åˆå§‹åŒ–ï¼ˆ~10 è¡Œï¼‰
2. é˜¶æ®µåˆ‡æ¢é€»è¾‘ï¼ˆ~20 è¡Œï¼‰
3. åŠ¨æ€å¥–åŠ±æ›´æ–°ï¼ˆ~15 è¡Œï¼‰
4. è¯¦ç»†è¿›åº¦ç›‘æ§ï¼ˆ~30 è¡Œï¼‰
5. ç¾åŒ–è¾“å‡ºæ ¼å¼ï¼ˆ~30 è¡Œï¼‰
6. é‡å†™è®­ç»ƒå¾ªç¯ï¼ˆ~100 è¡Œï¼‰
7. TensorBoard é›†æˆï¼ˆ~15 è¡Œï¼‰
8. æ£€æŸ¥ç‚¹ä¿å­˜ï¼ˆ~10 è¡Œï¼‰
```

---

## 6ï¸âƒ£ è®­ç»ƒæ•ˆæœå¯¹æ¯”

### ğŸ“‰ åŸç‰ˆæ–¹æ³•çš„å­¦ä¹ æ›²çº¿ï¼ˆé¢„æœŸï¼‰
```
å¥–åŠ±å€¼
  â”‚
200 â”‚
    â”‚                                    
150 â”‚                              â•±â•²â•±â•²
    â”‚                          â•±â•²â•±    â•²
100 â”‚                    â•±â•²â•±â•²â•±          
    â”‚              â•±â•²â•±â•²â•±              
 50 â”‚      â•±â•²â•±â•²â•±â•²â•±                    
    â”‚â•±â•²â•±â•²â•±                            
  0 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ è¿­ä»£æ¬¡æ•°
    0     5k    10k   15k   20k   25k  30k

é—®é¢˜ï¼š
- åˆæœŸéœ‡è¡å¤§ï¼ˆç›´æ¥é¢å¯¹å¤æ‚ä»»åŠ¡ï¼‰
- å¯èƒ½æ— æ³•æ”¶æ•›ï¼ˆå¥–åŠ±å†²çªï¼‰
- å­¦ä¹ æ•ˆç‡ä½
```

### ğŸ“ˆ æ–°ç‰ˆæ–¹æ³•çš„å­¦ä¹ æ›²çº¿ï¼ˆé¢„æœŸï¼‰
```
å¥–åŠ±å€¼
  â”‚
200 â”‚                         é˜¶æ®µ3 â•±â•±â•±â•±
    â”‚                              â•±
150 â”‚              é˜¶æ®µ2     â•±â•±â•±â•±â•±
    â”‚                    â•±â•±â•±
100 â”‚        é˜¶æ®µ1  â•±â•±â•±â•±
    â”‚            â•±â•±
 50 â”‚      â•±â•±â•±â•±
    â”‚  â•±â•±â•±
  0 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ è¿­ä»£æ¬¡æ•°
    0    10k       20k            37k

ä¼˜åŠ¿ï¼š
- åˆæœŸç¨³å®šï¼ˆç®€å•ä»»åŠ¡ï¼‰
- æ¸è¿›å¼å­¦ä¹ ï¼ˆé€æ­¥å¢åŠ éš¾åº¦ï¼‰
- æ”¶æ•›å¿«ä¸”ç¨³å®š
```

---

## 7ï¸âƒ£ å®é™…ä½¿ç”¨å¯¹æ¯”

### åŸç‰ˆè®­ç»ƒ
```bash
# è¿è¡Œå‘½ä»¤ï¼ˆç®€å•ï¼‰
python train.py --task=tita_constraint --headless

# è¾“å‡ºï¼ˆç®€æ´ä½†ä¿¡æ¯å°‘ï¼‰
[INFO] Iteration 1000, reward: 50.2
[INFO] Iteration 2000, reward: 52.1
...
```

### æ–°ç‰ˆè®­ç»ƒ
```bash
# è¿è¡Œå‘½ä»¤ï¼ˆåŒæ ·ç®€å•ï¼‰
python train_parkour.py --task=tita_parkour --headless

# è¾“å‡ºï¼ˆè¯¦ç»†ä¸”ç¾è§‚ï¼‰
======================================================================
ğŸ“š è¯¾ç¨‹å­¦ä¹ é…ç½®æ‘˜è¦
======================================================================

é˜¶æ®µ 1: stage_1_flat_walking
  â”œâ”€ æè¿°: å­¦ä¹ åŸºç¡€è¡Œèµ°å’Œå§¿æ€æ§åˆ¶
  â”œâ”€ è¿­ä»£æ¬¡æ•°: 10,000 (27.0%)
  â”œâ”€ åœ°å½¢éš¾åº¦: Level 0
  â”œâ”€ éšœç¢é«˜åº¦: 5 cm
  â””â”€ å…³é”®å¥–åŠ±: éšœç¢æ¸…é™¤=0.5

é˜¶æ®µ 2: stage_2_small_obstacles
  â”œâ”€ æè¿°: å­¦ä¹ è¯†åˆ«å’Œè·¨è¶Šå°éšœç¢
  â”œâ”€ è¿­ä»£æ¬¡æ•°: 10,000 (27.0%)
  â”œâ”€ åœ°å½¢éš¾åº¦: Level 3
  â”œâ”€ éšœç¢é«˜åº¦: 10 cm
  â””â”€ å…³é”®å¥–åŠ±: éšœç¢æ¸…é™¤=1.0, è·³è·ƒæ—¶æœº=0.5

é˜¶æ®µ 3: stage_3_parkour_mastery
  â”œâ”€ æè¿°: å®Œç¾è·‘é…·ï¼šç²¾ç¡®æ—¶æœºã€ç¨³å®šç€é™†
  â”œâ”€ è¿­ä»£æ¬¡æ•°: 17,000 (46.0%)
  â”œâ”€ åœ°å½¢éš¾åº¦: Level 7
  â”œâ”€ éšœç¢é«˜åº¦: 15 cm
  â””â”€ å…³é”®å¥–åŠ±: éšœç¢æ¸…é™¤=2.0, è·³è·ƒæ—¶æœº=1.5, ç€é™†ç¨³å®š=1.0

æ€»è¿­ä»£æ¬¡æ•°: 37,000
é¢„è®¡è®­ç»ƒæ—¶é—´: ~5.1 å°æ—¶ (RTX 3060)
======================================================================

ğŸš€ å¼€å§‹è®­ç»ƒ...
```

---

## 8ï¸âƒ£ æ€»ç»“

### ğŸ“Š ä»£ç è¡Œæ•°åˆ†å¸ƒ

| åŠŸèƒ½æ¨¡å— | åŸç‰ˆ | æ–°ç‰ˆ | å¢åŠ  |
|---------|------|------|------|
| å¯¼å…¥ä¸é…ç½® | 10 | 25 | +15 |
| ç¯å¢ƒåˆ›å»º | 5 | 10 | +5 |
| è¯¾ç¨‹å­¦ä¹ é€»è¾‘ | 0 | 50 | +50 |
| è®­ç»ƒå¾ªç¯ | 1 | 100 | +99 |
| æ—¥å¿—ä¸ç›‘æ§ | 0 | 40 | +40 |
| ä¸»å‡½æ•° | 5 | 17 | +12 |
| **æ€»è®¡** | **21** | **242** | **+221** |

### ğŸ¯ ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¹ˆå¤šä»£ç ï¼Ÿæ ¸å¿ƒåŸå› 

1. **é‡å†™è®­ç»ƒå¾ªç¯**ï¼ˆ+100 è¡Œï¼‰
   - åŸç‰ˆï¼šè°ƒç”¨ `ppo_runner.learn()` ä¸€è¡Œæå®š
   - æ–°ç‰ˆï¼šéœ€è¦æ‰‹åŠ¨å®ç°å†…éƒ¨é€»è¾‘ä»¥æ’å…¥è¯¾ç¨‹å­¦ä¹ 

2. **è¯¾ç¨‹å­¦ä¹ é›†æˆ**ï¼ˆ+50 è¡Œï¼‰
   - é˜¶æ®µåˆ‡æ¢æ£€æµ‹
   - åŠ¨æ€å¥–åŠ±æ›´æ–°
   - ç¯å¢ƒé…ç½®è°ƒæ•´

3. **è¯¦ç»†æ—¥å¿—ä¸ç¾åŒ–**ï¼ˆ+40 è¡Œï¼‰
   - é˜¶æ®µè¿›åº¦æ˜¾ç¤º
   - ç¾åŒ–è¾“å‡ºæ ¼å¼
   - TensorBoard é›†æˆ

4. **ç”¨æˆ·ä½“éªŒä¼˜åŒ–**ï¼ˆ+20 è¡Œï¼‰
   - å‹å¥½çš„æç¤ºä¿¡æ¯
   - é”™è¯¯å¤„ç†
   - è¿›åº¦æ¡ä¸ç»Ÿè®¡

5. **æ–‡æ¡£ä¸æ³¨é‡Š**ï¼ˆ+11 è¡Œï¼‰
   - é¡¶éƒ¨æ–‡æ¡£å­—ç¬¦ä¸²
   - ä»£ç æ³¨é‡Š

### âœ… å€¼å¾—å—ï¼Ÿ

**ç»å¯¹å€¼å¾—ï¼** è™½ç„¶ä»£ç é‡å¢åŠ äº† 10 å€ï¼Œä½†å¸¦æ¥çš„ä»·å€¼ï¼š

1. **è®­ç»ƒæˆåŠŸç‡æå‡**ï¼šå¤æ‚ä»»åŠ¡èƒ½æ”¶æ•›
2. **è®­ç»ƒæ—¶é—´ç¼©çŸ­**ï¼šæ¸è¿›å­¦ä¹ æ›´é«˜æ•ˆ
3. **ç›‘æ§æ›´ç›´è§‚**ï¼šæ¸…æ¥šçŸ¥é“è®­ç»ƒè¿›å±•
4. **å¯ç»´æŠ¤æ€§æ›´å¥½**ï¼šé€»è¾‘æ¸…æ™°ï¼Œæ˜“äºè°ƒè¯•
5. **ç”¨æˆ·ä½“éªŒæ›´ä½³**ï¼šå‹å¥½çš„è¾“å‡ºä¿¡æ¯

### ğŸ”® æœªæ¥ä¼˜åŒ–æ–¹å‘

å¦‚æœè§‰å¾—ä»£ç å¤ªé•¿ï¼Œå¯ä»¥ï¼š
1. **æå–è¯¾ç¨‹å­¦ä¹ ä¸ºç‹¬ç«‹æ¨¡å—**ï¼ˆå·²å®Œæˆï¼š`parkour_curriculum.py`ï¼‰
2. **åˆ›å»ºé€šç”¨çš„è¯¾ç¨‹å­¦ä¹  Runner**ï¼ˆå¯ä»¥è®©å…¶ä»–ä»»åŠ¡ä¹Ÿä½¿ç”¨ï¼‰
3. **ç®€åŒ–æ—¥å¿—è¾“å‡º**ï¼ˆç§»é™¤éƒ¨åˆ†ç¾åŒ–ä»£ç ï¼‰
4. **ä½¿ç”¨é…ç½®æ–‡ä»¶**ï¼ˆå°†è¯¾ç¨‹å®šä¹‰ç§»åˆ° YAMLï¼‰

ä½†ç›®å‰çš„å®ç°å·²ç»æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å¹³è¡¡ï¼šåŠŸèƒ½å®Œæ•´ã€é€»è¾‘æ¸…æ™°ã€æ˜“äºç†è§£å’Œä¿®æ”¹ã€‚

---

## 9ï¸âƒ£ å¿«é€Ÿå‚è€ƒ

### ä»€ä¹ˆæ—¶å€™ç”¨åŸç‰ˆ `train.py`ï¼Ÿ
- âœ… ç®€å•åœ°å½¢è¡Œèµ°
- âœ… åŸå‹éªŒè¯
- âœ… å¿«é€Ÿæµ‹è¯•
- âœ… å­¦ä¹ åŸºç¡€æµç¨‹

### ä»€ä¹ˆæ—¶å€™ç”¨æ–°ç‰ˆ `train_parkour.py`ï¼Ÿ
- âœ… å¤æ‚è·‘é…·ä»»åŠ¡
- âœ… éœ€è¦æ¸è¿›å­¦ä¹ 
- âœ… è¿½æ±‚è®­ç»ƒç¨³å®šæ€§
- âœ… éœ€è¦è¯¦ç»†ç›‘æ§

### å‘½ä»¤å¯¹æ¯”
```bash
# åŸç‰ˆï¼šç®€å•ä»»åŠ¡
python train.py --task=tita_constraint --headless

# æ–°ç‰ˆï¼šè·‘é…·ä»»åŠ¡
python train_parkour.py --task=tita_parkour --headless
```

---

**æœ€ç»ˆç»“è®º**ï¼šæ–°æ–¹æ³•è™½ç„¶ä»£ç å¤šäº† 10 å€ï¼ˆ45 â†’ 242 è¡Œï¼‰ï¼Œä½†å®ç°äº†**è¯¾ç¨‹å­¦ä¹ **è¿™ä¸€æ ¸å¿ƒåŠŸèƒ½ï¼Œä½¿å¾—å¤æ‚çš„è·‘é…·ä»»åŠ¡ä»"å‡ ä¹ä¸å¯èƒ½è®­ç»ƒ"å˜ä¸º"ç¨³å®šæ¸è¿›å­¦ä¹ "ã€‚é¢å¤–çš„ä»£ç ä¸»è¦ç”¨äºï¼š
1. é‡å†™è®­ç»ƒå¾ªç¯ä»¥æ’å…¥è¯¾ç¨‹é€»è¾‘ï¼ˆ100 è¡Œï¼‰
2. è¯¦ç»†çš„è¿›åº¦ç›‘æ§ä¸ç¾åŒ–è¾“å‡ºï¼ˆ40 è¡Œï¼‰
3. è¯¾ç¨‹ç®¡ç†å™¨é›†æˆä¸é˜¶æ®µåˆ‡æ¢ï¼ˆ50 è¡Œï¼‰
4. ç”¨æˆ·ä½“éªŒä¼˜åŒ–ï¼ˆ30 è¡Œï¼‰

è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„**åŠŸèƒ½æ¢å¤æ‚åº¦**çš„æƒè¡¡ï¼Œå¯¹äºè·‘é…·è¿™æ ·çš„å¤æ‚ä»»åŠ¡ï¼Œè¿™ä¸ªæƒè¡¡æ˜¯éå¸¸å€¼å¾—çš„ï¼ğŸ‰
